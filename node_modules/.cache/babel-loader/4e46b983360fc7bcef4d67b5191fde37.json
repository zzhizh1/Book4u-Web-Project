{"ast":null,"code":"var _jsxFileName = \"/Users/kejingwang/Desktop/CIS550Database/AllProjects/Project550New 2/client/src/components/Subpage.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport '../style/Subpage.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport PageNavbar from './PageNavbar';\nimport StarIcon from \"../assets/images/star.png\";\nimport StarRatingComponent from 'react-star-rating-component';\nimport Carousel from 'react-multi-carousel';\nimport 'react-multi-carousel/lib/styles.css';\nimport cart from \"../assets/images/cart.png\";\nimport bookmark from \"../assets/images/bookmark.png\";\nimport bookmarkFill from \"../assets/images/bookmarkFill.png\";\n\nclass Subpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: window.localStorage.getItem(\"username\"),\n      ISBN: this.props.location.state.ISBN,\n      //ISBN: from the props.history.push in Dashboard/Rec code, the ISBN of book clicked\n      book: {},\n      //detailed book info: title, author, publisher, year, image_url_l\n      prevRating: false,\n      //if user previously rated the book \n      curRating: 0,\n      //star num clicked, 0 star means that user hasn't selected anything\n      avgRating: 0,\n      //average rating of this ISBN\n      relatedBooks: [],\n      //contains book info of the same author\n      onShelf: false //if the book is on user's shelf\n\n    };\n    this.getRelatedBooks = this.getRelatedBooks.bind(this);\n    this.sumbitRating = this.sumbitRating.bind(this);\n    this.changeBookshelf = this.changeBookshelf.bind(this);\n    this.addBook = this.addBook.bind(this);\n    this.removeBook = this.removeBook.bind(this);\n  }\n\n  componentDidMount() {\n    //GET BOOK BY ISBN\n    fetch(`http://localhost:8081/book/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(resArray => {\n      if (!resArray) return;\n      this.setState({\n        book: resArray[0]\n      });\n    }).catch(err => console.log(err)); // Print the error if there is one. \n    //GET AVERAGE RATING BY ISBN\n\n    fetch(`http://localhost:8081/avgRating/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(resArray => {\n      if (!resArray) return;\n      this.setState({\n        avgRating: resArray[0].avgRating\n      });\n    }).catch(err => console.log(err)); // Print the error if there is one.\n    //GET PREVIOUS RATING OF USER ON THIS ISBN\n\n    fetch(`http://localhost:8081/userRating/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(resArray => {\n      if (resArray.length > 0) {\n        //not an empty array\n        this.setState({\n          prevRating: true,\n          curRating: resArray[0].rating\n        });\n      }\n    }).catch(err => console.log(err)); //GET THE BOOK FROM SHELF \n\n    fetch(`http://localhost:8081/bookOnShelf/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(resArray => {\n      if (resArray.length != 0) {\n        console.log(\"onShelf\");\n        this.setState({\n          onShelf: true\n        });\n      }\n    }).catch(err => console.log(err)); //GET BOOKS OF SAME AUTHOR\n\n    this.getRelatedBooks();\n  }\n\n  getRelatedBooks(ISBN) {\n    fetch(`http://localhost:8081/relatedBooks/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(resArray => {\n      if (!resArray) return;\n      this.setState({\n        relatedBooks: resArray\n      });\n    }).catch(err => console.log(err));\n  } //---------------------Events Handlers-------------------\n\n\n  onStarClick(nextValue, prevValue, name) {\n    this.setState({\n      curRating: nextValue\n    });\n  }\n\n  sumbitRating() {\n    if (!this.state.username) {\n      alert(\"Please log in first!\");\n    } else if (this.state.curRating == 0) {\n      alert(\"Please select a number!\");\n    } else if (!this.state.ISBN) {\n      alert(\"Error\");\n    } //if no previous rating exists in db, insertion query\n\n\n    if (!this.state.prevRating) {\n      fetch(`http://localhost:8081/submitRating/${this.state.username}/${this.state.ISBN}/${this.state.curRating}`, {\n        method: 'GET'\n      }).then(res => res.json()).then(res => {\n        //res is {status: \"success\"} if server -> db is sucessful\n        if (res.status == \"success\") {\n          this.setState({\n            prevRating: true\n          });\n          alert(\"Rating submitted!\");\n        } else {\n          alert(\"DB Query Error!\");\n        }\n      }).catch(err => console.log(err)); //If exists previous rating in db, UPDATE query\n    } else {\n      fetch(`http://localhost:8081/updateRating/${this.state.username}/${this.state.ISBN}/${this.state.curRating}`, {\n        method: 'GET'\n      }).then(res => res.json()).then(res => {\n        //res is {status: \"success\"} if server -> db is sucessful\n        if (res.status == \"success\") {\n          alert(\"Rating updated!\");\n        } else {\n          alert(\"DB Query Error!\");\n        }\n      }).catch(err => console.log(err));\n    }\n  } //合的时候用zz写的!!!!!\n\n\n  changeBookshelf() {\n    if (!this.state.username) {\n      alert(\"Please log in first!\");\n    } else if (!this.state.ISBN) {\n      alert(\"Error\");\n    } //change the onshelf state on click     \n    //pass an function instead of obj in setState to allow access to current state\n\n\n    console.log(\"onshelf status before click: \" + this.state.onShelf);\n    this.setState(state => {\n      return {\n        onShelf: !this.state.onShelf\n      };\n    }); //this.state.onshelf is not updated yet inside of function \n\n    var changedStatus = !this.state.onShelf;\n    console.log(\"onshelf status after setState: \" + changedStatus);\n\n    if (changedStatus) {\n      this.addBook();\n    } else {\n      this.removeBook();\n    }\n  }\n\n  addBook() {\n    fetch(`http://localhost:8081/addBook/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(res => {\n      //res is {status: \"success\"} if server -> db is sucessful\n      if (res.status != \"success\") {\n        this.setState(state => {\n          return {\n            onShelf: !this.state.onShelf\n          };\n        });\n        alert(\"DB Query Error\");\n      } else {\n        alert(\"Book added!\");\n      }\n    }).catch(err => console.log(err));\n  }\n\n  removeBook() {\n    fetch(`http://localhost:8081/removeBook/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(res => {\n      //res is {status: \"success\"} if server -> db is sucessful\n      if (res.status != \"success\") {\n        this.setState(state => {\n          return {\n            onShelf: !this.state.onShelf\n          };\n        });\n        alert(\"DB Query Error\");\n      } else {\n        alert(\"Book removed\");\n      }\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    //const {curRating} = this.state;  \n    const responsive = {\n      desktop: {\n        breakpoint: {\n          max: 3000,\n          min: 1024\n        },\n        items: 5,\n        slidesToSlide: 3 // optional, default to 1.\n\n      },\n      tablet: {\n        breakpoint: {\n          max: 1024,\n          min: 464\n        },\n        items: 4,\n        slidesToSlide: 2 // optional, default to 1.\n\n      },\n      mobile: {\n        breakpoint: {\n          max: 464,\n          min: 0\n        },\n        items: 2,\n        slidesToSlide: 1 // optional, default to 1.\n\n      }\n    };\n    var removeBookRow = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 rating-col3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"bookmark\",\n      src: bookmarkFill,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      type: \"button\",\n      id: \"button-markBook\",\n      onClick: this.changeBookshelf,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }\n    }, \"Remove this book from bookshelf\"));\n    var addBookRow = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 rating-col3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"bookmark\",\n      src: bookmark,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      type: \"button\",\n      id: \"button-markBook\",\n      onClick: this.changeBookshelf,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 19\n      }\n    }, \"Add this book to bookshelf\"));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Subpage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PageNavbar, {\n      active: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container movies-container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-wrap1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list1 pr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-box1 px-3 pt-3\",\n      id: \"sub\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"list-title1 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }\n    }, \"\\u2261 Book Information\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-row1 pt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 cover-col1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"cover1\",\n      src: this.state.book.image_url_l,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 content-col1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }\n    }, this.state.book.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 author-col1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 rating-col1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-black-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, this.state.book.author), /*#__PURE__*/React.createElement(\"img\", {\n      id: \"star\",\n      src: StarIcon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      id: \"r\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 19\n      }\n    }, this.state.avgRating.toFixed(2))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }, \"ISBN: \", this.state.ISBN), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }\n    }, \"Publisher: \", this.state.book.publisher), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }, \"Year of Publication: \", this.state.book.year), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-col1 rating-col2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"cart\",\n      src: cart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: `https://www.amazon.com/s?k=${this.state.ISBN}`,\n      id: \"outlink\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 25\n      }\n    }, \" Buy this book!\"))), this.state.onShelf ? removeBookRow : addBookRow, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row-ratingRow2\",\n      id: \"rateBook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(StarRatingComponent, {\n      name: \"rate2\",\n      editing: true,\n      starCount: 10,\n      value: this.state.curRating,\n      onStarClick: this.onStarClick.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }\n    }, \"  \", this.state.curRating)), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn bg-light text-black\",\n      type: \"button\",\n      id: \"button-rating\",\n      onClick: this.sumbitRating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 15\n      }\n    }, \"Submit Your Rating\"))), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"list-title mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 5\n      }\n    }, \"\\u2261 Related Books by \\\"\", this.state.book.author, \"\\\"\"), /*#__PURE__*/React.createElement(Carousel, {\n      swipeable: false,\n      draggable: false,\n      showDots: false,\n      responsive: responsive,\n      ssr: true // means to render carousel on server-side.\n      ,\n      infinite: true,\n      autoPlay: this.props.deviceType !== \"mobile\" ? true : false,\n      autoPlaySpeed: 2000,\n      keyBoardControl: true,\n      customTransition: \"all .5\",\n      transitionDuration: 500,\n      containerClass: \"carousel-container\",\n      removeArrowOnDeviceType: [\"tablet\", \"mobile\"],\n      deviceType: this.props.deviceType,\n      dotListClass: \"custom-dot-list-style\",\n      itemClass: \"carousel-item-padding-40-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }\n    }, this.state.relatedBooks.map((element, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col mb-4\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"card-img-top\",\n        src: element.image_url_l,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 21\n        }\n      }, element.title))));\n    })))))));\n  }\n\n}\n\nexport default withRouter(Subpage);","map":{"version":3,"sources":["/Users/kejingwang/Desktop/CIS550Database/AllProjects/Project550New 2/client/src/components/Subpage.js"],"names":["React","withRouter","PageNavbar","StarIcon","StarRatingComponent","Carousel","cart","bookmark","bookmarkFill","Subpage","Component","constructor","props","state","username","window","localStorage","getItem","ISBN","location","book","prevRating","curRating","avgRating","relatedBooks","onShelf","getRelatedBooks","bind","sumbitRating","changeBookshelf","addBook","removeBook","componentDidMount","fetch","method","then","res","json","resArray","setState","catch","err","console","log","length","rating","onStarClick","nextValue","prevValue","name","alert","status","changedStatus","render","responsive","desktop","breakpoint","max","min","items","slidesToSlide","tablet","mobile","removeBookRow","addBookRow","image_url_l","title","author","toFixed","publisher","year","deviceType","map","element","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport '../style/Subpage.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport PageNavbar from './PageNavbar';\nimport StarIcon from \"../assets/images/star.png\";\nimport StarRatingComponent from 'react-star-rating-component';\nimport Carousel from 'react-multi-carousel';\nimport 'react-multi-carousel/lib/styles.css';\nimport cart from \"../assets/images/cart.png\";\nimport bookmark from \"../assets/images/bookmark.png\";\nimport bookmarkFill from \"../assets/images/bookmarkFill.png\";\n\nclass Subpage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: window.localStorage.getItem(\"username\"),\n      ISBN: this.props.location.state.ISBN,  //ISBN: from the props.history.push in Dashboard/Rec code, the ISBN of book clicked\n      book: {}, //detailed book info: title, author, publisher, year, image_url_l\n      prevRating: false, //if user previously rated the book \n      curRating: 0, //star num clicked, 0 star means that user hasn't selected anything\n      avgRating: 0, //average rating of this ISBN\n      relatedBooks: [], //contains book info of the same author\n      onShelf: false //if the book is on user's shelf\n    }\n\n    this.getRelatedBooks = this.getRelatedBooks.bind(this);\n    this.sumbitRating = this.sumbitRating.bind(this);\n    this.changeBookshelf = this.changeBookshelf.bind(this);\n    this.addBook = this.addBook.bind(this);\n    this.removeBook = this.removeBook.bind(this);\n  }\n\n  componentDidMount() {\n    //GET BOOK BY ISBN\n    fetch(`http://localhost:8081/book/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n      .then(res => res.json())\n      .then(resArray => {\n        if (!resArray) return;\n        this.setState({\n          book: resArray[0]\n        });\n      })\n      .catch(err => console.log(err))\t// Print the error if there is one. \n\n    //GET AVERAGE RATING BY ISBN\n    fetch(`http://localhost:8081/avgRating/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n      .then(res => res.json())\n      .then(resArray => {\n        if (!resArray) return;\n        this.setState({\n          avgRating: resArray[0].avgRating\n        });\n      })\n      .catch(err => console.log(err))\t// Print the error if there is one.\n\n    //GET PREVIOUS RATING OF USER ON THIS ISBN\n    fetch(`http://localhost:8081/userRating/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n      .then(res => res.json())\n      .then(resArray => {\n        if (resArray.length > 0) { //not an empty array\n          this.setState({\n            prevRating: true,\n            curRating: resArray[0].rating\n          });\n        }\n\n      })\n      .catch(err => console.log(err));\n\n    //GET THE BOOK FROM SHELF \n    fetch(`http://localhost:8081/bookOnShelf/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n      .then(res => res.json())\n      .then(resArray => {\n        if (resArray.length != 0) {\n          console.log(\"onShelf\");\n          this.setState({\n            onShelf: true\n          });\n        }\n      })\n      .catch(err => console.log(err));\n\n    //GET BOOKS OF SAME AUTHOR\n    this.getRelatedBooks();\n  } \n\n  getRelatedBooks(ISBN) {\n    fetch(`http://localhost:8081/relatedBooks/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n      .then(res => res.json())\n      .then(resArray => {\n        if (!resArray) return;\n        this.setState({\n          relatedBooks: resArray\n        });\n      })\n      .catch(err => console.log(err));\n  }\n\n  //---------------------Events Handlers-------------------\n  onStarClick(nextValue, prevValue, name) {\n    this.setState({curRating: nextValue});\n  }\n\n  sumbitRating() {    \n    if (!this.state.username) {\n      alert(\"Please log in first!\");\n    } else if (this.state.curRating == 0) {\n      alert(\"Please select a number!\")\n    } else if (!this.state.ISBN) {\n      alert(\"Error\");\n    }\n\n    //if no previous rating exists in db, insertion query\n    if (!this.state.prevRating) {\n      fetch(`http://localhost:8081/submitRating/${this.state.username}/${this.state.ISBN}/${this.state.curRating}`, {\n        method: 'GET'\n      })\n        .then(res => res.json())\n        .then(res => {\n          //res is {status: \"success\"} if server -> db is sucessful\n          if (res.status == \"success\") {\n            this.setState({prevRating: true});\n            alert(\"Rating submitted!\");\n          } else {\n            alert(\"DB Query Error!\");\n          }\n        })\n        .catch(err => console.log(err));\n\n    //If exists previous rating in db, UPDATE query\n    } else { \n      fetch(`http://localhost:8081/updateRating/${this.state.username}/${this.state.ISBN}/${this.state.curRating}`, {\n        method: 'GET'\n      })\n        .then(res => res.json())\n        .then(res => {\n          //res is {status: \"success\"} if server -> db is sucessful\n          if (res.status == \"success\") {\n            alert(\"Rating updated!\");\n          } else {\n            alert(\"DB Query Error!\");\n          }\n        })\n        .catch(err => console.log(err));\n    }\n\n  }\n\n  //合的时候用zz写的!!!!!\n  changeBookshelf() {\n    if (!this.state.username) {\n      alert(\"Please log in first!\");\n    } else if (!this.state.ISBN) {\n      alert(\"Error\");\n    }\n\n    //change the onshelf state on click     \n    //pass an function instead of obj in setState to allow access to current state\n    console.log(\"onshelf status before click: \" + this.state.onShelf);\n\n    this.setState((state) => {\n      return {onShelf: !this.state.onShelf}\n    });\n    //this.state.onshelf is not updated yet inside of function \n    var changedStatus = !this.state.onShelf;\n\n    console.log(\"onshelf status after setState: \" + changedStatus);\n    if(changedStatus) {\n      this.addBook();\n    } else {\n      this.removeBook();\n    }\n\n  }\n\n  addBook() {\n    fetch(`http://localhost:8081/addBook/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n    .then(res => res.json())\n    .then(res => {\n      //res is {status: \"success\"} if server -> db is sucessful\n      if (res.status != \"success\") {\n        this.setState((state) => {\n          return {onShelf: !this.state.onShelf}\n        });\n        alert(\"DB Query Error\");\n      } else {\n        alert(\"Book added!\");\n      }\n    })\n    .catch(err => console.log(err));\n  }\n\n  removeBook() {\n    fetch(`http://localhost:8081/removeBook/${this.state.username}/${this.state.ISBN}`, {\n      method: 'GET' \n    })\n    .then(res => res.json())\n    .then(res => {\n      //res is {status: \"success\"} if server -> db is sucessful\n      if (res.status != \"success\") {\n        this.setState((state) => {\n          return {onShelf: !this.state.onShelf}\n        });\n        alert(\"DB Query Error\");\n      } else {\n        alert(\"Book removed\");\n      }\n    })\n    .catch(err => console.log(err));\n  }\n \n  render() {  \n    //const {curRating} = this.state;  \n    const responsive = {\n      desktop: {\n        breakpoint: { max: 3000, min: 1024 },\n        items: 5,\n        slidesToSlide: 3 // optional, default to 1.\n      },\n      tablet: {\n        breakpoint: { max: 1024, min: 464 },\n        items: 4,\n        slidesToSlide: 2 // optional, default to 1.\n      },\n      mobile: {\n        breakpoint: { max: 464, min: 0 },\n        items: 2,\n        slidesToSlide: 1 // optional, default to 1.\n      }\n    };\n\n    var removeBookRow = (\n      <div className=\"list-col1 rating-col3\">\n                  <img id = \"bookmark\" src={bookmarkFill} />\n                  <button\n                  className=\"btn\"\n                  type=\"button\"\n                  id=\"button-markBook\"\n                  onClick={this.changeBookshelf}>\n                  Remove this book from bookshelf\n                  </button>\n      </div>\n    );\n    var addBookRow = \n    (\n      <div className=\"list-col1 rating-col3\">\n                  <img id = \"bookmark\" src={bookmark} />\n                  <button\n                  className=\"btn\"\n                  type=\"button\"\n                  id=\"button-markBook\"\n                  onClick={this.changeBookshelf}>\n                  Add this book to bookshelf\n                  </button>\n      </div>\n    );\n\n    return (\n        <div className=\"Subpage\">\n          <PageNavbar active=\"\" />\n          <br></br>\n          <div className=\"container movies-container mt-5\">\n            <div className=\"list-wrap1\">\n              <div className=\"list1 pr-1\">\n                <div className=\"list-box1 px-3 pt-3\" id= \"sub\">\n\n                \n          {/* <!-- Page Content --> */}\n          <h5 className=\"list-title1 mb-3\">≡ Book Information</h5>\n\n          {/* <!-- Book Info Row --> */}\n          <div className=\"list-row1 pt-2\" >\n            <div className=\"list-col1 cover-col1\">\n              <img className=\"cover1\" src={this.state.book.image_url_l} alt=\"\"/>\n            </div>\n\n            <div className=\"list-col1 content-col1\">\n                <h5>{this.state.book.title}</h5>\n                <div className=\"list-col1 author-col1\">\n                \n                </div>\n                <div className=\"list-col1 rating-col1\">\n                  <p className=\"text-black-50\">{this.state.book.author}</p>\n                  <img id = \"star\" src={StarIcon} />\n                  <h6 id=\"r\">{this.state.avgRating.toFixed(2)}</h6>\n                </div>\n                \n                <li>ISBN: {this.state.ISBN}</li>\n                <li>Publisher: {this.state.book.publisher}</li>\n                <li>Year of Publication: {this.state.book.year}</li>\n                \n\n                <div className=\"list-col1 rating-col2\">\n                  <img id = \"cart\" src={cart} />\n                  <span><a href={`https://www.amazon.com/s?k=${this.state.ISBN}`} id=\"outlink\" target=\"_blank\" rel=\"noopener noreferrer\"> Buy this book!</a></span>\n                </div>\n                {this.state.onShelf ? removeBookRow: addBookRow}\n                \n                \n\n              <div className=\"row-ratingRow2\" id = \"rateBook\">\n                <StarRatingComponent \n                          name=\"rate2\"\n                          editing={true}\n                          starCount={10}\n                          value= {this.state.curRating}\n                          onStarClick={this.onStarClick.bind(this)}\n                />\n                <p>  {this.state.curRating}</p>\n              </div>\n              <button\n                  className=\"btn bg-light text-black\"\n                  type=\"button\"\n                  id=\"button-rating\"\n                  onClick={this.sumbitRating}>\n                  Submit Your Rating\n              </button>\n             \n                \n            \n            </div>\n\n             \n          </div>\n          {/* <!-- /.row --> */}  \n\n\n    <h5 className=\"list-title mb-3\">≡ Related Books by \"{this.state.book.author}\"</h5>\n          {/* <!-- Related Books Row --> */}        \n          {/* <div className=\"list-row\">\n            {function(this.state.relatedBooks}\n            }\n            <div className=\"col-md-3 col-sm-6 mb-4\">\n              <a href=\"#\">\n                    <img className=\"img-fluid\" src=\"http://placehold.it/500x300\" alt=\"\"/>\n                </a>\n            </div>\n        \n            <div className=\"col-md-3 col-sm-6 mb-4\">\n              <a href=\"#\">\n                    <img className=\"img-fluid\" src=\"http://placehold.it/500x300\" alt=\"\"/>\n                  </a>\n            </div>\n        \n            <div className=\"col-md-3 col-sm-6 mb-4\">\n              <a href=\"#\">\n                    <img className=\"img-fluid\" src=\"http://placehold.it/500x300\" alt=\"\" />\n                  </a>\n            </div>\n        \n            <div className=\"col-md-3 col-sm-6 mb-4\">\n              <a href=\"#\">\n                    <img className=\"img-fluid\" src=\"http://placehold.it/500x300\" alt=\"\" />\n                  </a>\n            </div>\n        \n          </div> */}\n          {/* <!-- /.row --> */}  \n        \n          <Carousel\n            swipeable={false}\n            draggable={false}\n            showDots={false}\n            responsive={responsive}\n            ssr={true} // means to render carousel on server-side.\n            infinite={true}\n            autoPlay={this.props.deviceType !== \"mobile\" ? true : false}\n            autoPlaySpeed={2000}\n            keyBoardControl={true}\n            customTransition=\"all .5\"\n            transitionDuration={500}\n            containerClass=\"carousel-container\"\n            removeArrowOnDeviceType={[\"tablet\", \"mobile\"]}\n            deviceType={this.props.deviceType}\n            dotListClass=\"custom-dot-list-style\"\n            itemClass=\"carousel-item-padding-40-px\"\n          >\n            {this.state.relatedBooks.map((element, index) => {\n              return (\n                <div className=\"col mb-4\" key={index}>\n                <div className=\"card h-100\">\n\n                    <img className=\"card-img-top\" src={element.image_url_l} />\n\n              <div className=\"card-body\">\n                    <h6 className=\"card-title\">{element.title}</h6>\n                  </div></div></div>\n              );\n            })}\n          </Carousel>\n\n\n        </div>\n        </div>\n        </div>\n        </div>\n        </div>\n    );\n  }\n}\nexport default withRouter(Subpage);\n"]},"metadata":{},"sourceType":"module"}